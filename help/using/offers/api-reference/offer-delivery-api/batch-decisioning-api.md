---
title: Batch Decisioning API
description: Learn how to use the Batch Decisioning API to select the best offers for segmented profiles within a predefined decision scope.
feature: Offers
topic: Integrations
role: Data Engineer
level: Experienced
exl-id: 1ed01a6b-5e42-47c8-a436-bdb388f50b4e
source-git-commit: 79d3bd42c208d38aaebce742e70b247106c21587
workflow-type: tm+mt
source-wordcount: '856'
ht-degree: 3%

---


# [!DNL Batch Decisioning] {#deliver-offers-batch}

[!DNL Batch Decisioning] The offer content for each profiles in the segment is placed in an Adobe Experience Platform dataset where it is available for custom batch workflows.

[!DNL Batch Decisioning] [!DNL Batch Decisioning] Those offers are then used as content that is sent out for batch message delivery to the same segment of users.

To do this, the organization would:

* [!DNL Batch Decisioning]

   1. ****

   2. ****

* Export the dataset to the message delivery vendor API.

<!-- (Refer to the [export jobs endpoint documentation](https://experienceleague.adobe.com/docs/experience-platform/segmentation/api/export-jobs.html?lang=en) to learn more about exporting segments.) -->

## 시작하기 {#getting-started}

Before using this API, make sure you complete the following pre-requisite steps.

### Prepare the decision {#prepare-decision}

Follow the steps below to prepare one or more decisions:

* In order to export the decision result, create a dataset using the &quot;ODE DecisionEvents&quot; schema.

* Create a Platform segment which should be evaluated and then updated. [](http://www.adobe.com/go/segmentation-overview-en)

* Create a decision (which has a decision scope that consists of a Decision ID and a Placement ID) in Adobe Journey Optimizer. [](../../offer-activities/create-offer-activities.md)

### API requirements {#api-requirements}

[!DNL Batch Decisioning][](../getting-started.md)

* `Content-Type`: `application/json`
* `x-request-id`
* `x-sandbox-name`
* `x-sandbox-id`

## Start a batch process {#start-a-batch-process}

`/workloads/decisions`

****

```https
POST {ENDPOINT_PATH}/{CONTAINER_ID}/workloads/decisions
```

| 매개 변수 | 설명 | 예 |
| --------- | ----------- | ------- |
| `{ENDPOINT_PATH}` | The endpoint path for repository APIs. | `https://platform.adobe.io/data/core/ode` |
| `{CONTAINER_ID}` | The container where the decisions are located. | `e0bd8463-0913-4ca1-bd84-6309134ca1f6` |

**요청**

```shell
curl -X POST 'https://platform.adobe.io/data/core/ode/0948b1c5-fff8-3b76-ba17-909c6b93b5a2/workloads/decisions' \
-H 'x-request-id: f671a589-eb7b-432f-b6b9-23d5b796b4dc' \
-H 'Content-Type: application/json' \
-H 'x-api-key: {API_KEY}' \
-H 'x-gw-ims-org-id: {IMS_ORG}' \
-H 'x-sandbox-name: {SANDBOX_NAME}' \
-H 'x-sandbox-id: {SANDBOX_ID}' \
-H 'Authorization: Bearer {ACCESS_TOKEN}' \
-d '{
  "xdm:segmentIds": [
    "609028e4-e66c-4776-b0d9-c782887e2273"
  ],
  "xdm:dataSetId": "6196b4a1a63bd118dafe093c",
  "xdm:propositionRequests": [
        {
            "xdm:activityId": "xcore:offer-activity:1410cdcda196707b",
            "xdm:placementId": "xcore:offer-placement:1410c4117306488a",
            "xdm:itemCount": 1
        }
  ],
  "xdm:includeContent": false
}'
```

| 속성 | 설명 | 예 |
| -------- | ----------- | ------- |
| `xdm:segmentIds` | The value is an array that contains the unique identifier of the segment. It can only contain one value. | `609028e4-e66c-4776-b0d9-c782887e2273` |
| `xdm:dataSetId` | The output dataSet that decision events can be written into. | `6196b4a1a63bd118dafe093c` |
| `xdm:propositionRequests` | `placementId``activityId` |  |
| `xdm:activityId` | The unique identifier of the decision. | `xcore:offer-activity:1410cdcda196707b` |
| `xdm:placementId` | The unique placement identifier. | `xcore:offer-placement:1410c4117306488a` |
| `xdm:itemCount` | This is an optional field showing the number of items such as options requested for the decisioning scope. By default, the API returns one option per scope, but you can explicitly ask for more options by specifying this field. A minimum of 1 and a maximum of 30 options can be requested per scope. | `1` |
| `xdm:includeContent` | `false` `true` | `false` |

[](../../get-started/starting-offer-decisioning.md)

**응답**

```json
{
    "@id": "47efef25-4bcf-404f-96e2-67c4f784a1f5",
    "xdm:imsOrgId": "9GTO98D5F@AdobeOrg",
    "xdm:containerId": "0948b1c5-fff8-3b76-ba17-909c6b93b5a2",
    "ode:createDate": 1648078924834,
    "ode:status": "QUEUED"
}
```

| 속성 | 설명 | 예 |
| -------- | ----------- | ------- |
| `@id` | The UUID generated by Offer Decisioning that identifies a single workload. | `5d0ffb5e-dfc6-4280-99b6-0bf3131cb8b8` |
| `xdm:imsOrgId` | The Organization ID. | `9GTO98D5F@AdobeOrg` |
| `xdm:containerId` | The container ID. | `0948b1c5-fff8-3b76-ba17-909c6b93b5a2` |
| `ode:createDate` | The time when the decision workload request was created. | `1648078924834` |
| `ode:status` | The status of the workload. | `ode:status: "QUEUED"` |

## Retrieve information on a batch decision {#retrieve-information-on-a-batch-decision}

`/workloads/decisions`

****

```https
GET  {ENDPOINT_PATH}/{CONTAINER_ID}/workloads/decisions/{WORKLOAD_ID}
```

| 매개 변수 | 설명 | 예 |
| --------- | ----------- | ------- |
| `{ENDPOINT_PATH}` | The endpoint path for repository APIs. | `https://platform.adobe.io/data/core/ode` |
| `{CONTAINER_ID}` | The container where the decisions are located. | `e0bd8463-0913-4ca1-bd84-6309134ca1f6` |
| `{WORKLOAD_ID}` | The UUID generated by Offer Decisioning that identifies a single workload. | `47efef25-4bcf-404f-96e2-67c4f784a1f5` |

**요청**

```shell
curl -X GET 'https://platform.adobe.io/data/core/ode/0948b1c5-fff8-3b76-ba17-909c6b93b5a2/workloads/decisions/f395ab1f-dfaf-48d4-84c9-199ad6354591' \
-H 'x-request-id: 7832a42a-d4e5-413b-98e8-e49bef056436' \
-H 'Content-Type: application/json' \
-H 'x-api-key: {API_KEY}' \
-H 'x-gw-ims-org-id: {IMS_ORG}' \
-H 'x-sandbox-name: {SANDBOX_NAME}' \
-H'x-sandbox-id: {SANDBOX_ID}' \
-H 'Authorization: Bearer {ACCESS_TOKEN}'
```

**응답**

```json
{
    "@id": "f395ab1f-dfaf-48d4-84c9-199ad6354591",
    "xdm:imsOrgId": "{IMS_ORG}",
    "xdm:containerId": "0948b1c5-fff8-3b76-ba17-909c6b93b5a2",
    "ode:createDate": 1648076994405,
    "ode:status": "COMPLETED"
}
```

| 속성 | 설명 | 예 |
| -------- | ----------- | ------- |
| `@id` | The UUID generated by Offer Decisioning that identifies a single workload. | `5d0ffb5e-dfc6-4280-99b6-0bf3131cb8b8` |
| `xdm:imsOrgId` | The Organization ID | `9GTO98D5F@AdobeOrg` |
| `xdm:containerId` | The Container ID | `0948b1c5-fff8-3b76-ba17-909c6b93b5a2` |
| `ode:createDate` | The time when Decision Workload request was created. | `1648076994405` |
| `ode:status` | The status of the workload starts with &quot;QUEUED&quot; and changes to &quot;PROCESSING&quot;, &quot;INGESTING&quot;, &quot;COMPLETED&quot; or &quot;ERROR&quot;. | `ode:status: "COMPLETED"` |
| `ode:statusDetail` | This shows more details such as sparkJobId and batchID if the status is &quot;PROCESSING&quot; or &quot;INGESTING&quot;. It shows the error details if the status is &quot;ERROR&quot;. |  |

## Service levels {#service-levels}

The end-to-end time for every batch decision is the duration from the time the workload is created to the to the time when the decision result is available in the output dataset. The segment size in the POST request payload is the main factor that affects the end-to-end batch decision time.  Below are some observations for different segment sizes:

| Segment size | End-to-end processing time |
|--------------|----------------------------|
| 10 thousand profiles or less | 6분 |
| 1 million profiles or less | 10분 |
| 15 million profiles or less | 75분 |

## 제한 사항 {#limitations}

[!DNL Batch Decisioning]

* **** Any other requests with the same output dataset would respond with HTTP 429 (Too Many Requests) before the previous request finishes.
* **** [!DNL Batch Decisioning]

## 다음 단계 {#next-steps}

[!DNL Batch Decisioning] [](../../get-started/starting-offer-decisioning.md)
