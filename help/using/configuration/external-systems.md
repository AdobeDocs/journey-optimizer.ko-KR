---
solution: Journey Optimizer
product: journey optimizer
title: 외부 시스템과 Journey Optimizer 통합
description: Journey Optimizer을 외부 시스템과 통합할 때의 모범 사례를 알아봅니다
feature: Integrations
role: User
level: Beginner
keywords: 외부, API, 최적화 프로그램, 한도
exl-id: 27859689-dc61-4f7a-b942-431cdf244455
source-git-commit: bc614a78229771e826edea581aefb97b0e3f4159
workflow-type: tm+mt
source-wordcount: '1805'
ht-degree: 18%

---

# 외부 시스템과 통합 {#external-systems}

이 페이지에서는 외부 시스템 통합 시 Journey Optimizer에서 제공하는 다양한 보호 기능과 모범 사례, 즉 최대 가용량 API를 사용하여 외부 시스템 보호를 최적화하는 방법, 여정 시간 제한을 구성하는 방법 및 다시 시도 작동 방식을 제공합니다.

Journey Optimizer에서는 사용자 지정 데이터 소스 및 사용자 지정 작업을 통해 외부 시스템에 대한 연결을 구성할 수 있습니다. 예를 들어 외부 예약 시스템에서 가져온 데이터로 여정을 보강하거나 Epsilon 또는 Facebook과 같은 서드파티 시스템을 사용하여 메시지를 보낼 수 있습니다.

외부 시스템을 통합할 때 몇 가지 문제가 발생하거나 시스템이 느려지거나 응답을 중지하거나 큰 볼륨을 처리하지 못할 수 있습니다. Journey Optimizer은 과부하로부터 시스템을 보호하기 위해 몇 가지 보호 기능을 제공합니다.

모든 외부 시스템은 성능 면에서 다릅니다. 사용 사례에 맞게 구성을 조정해야 합니다.

Journey Optimizer이 외부 API 호출을 실행하면 다음과 같이 기술 가드레일이 실행됩니다.

1. 최대 가용량 또는 조절 규칙이 적용됩니다. 최대 비율에 도달하면 나머지 호출은 삭제되거나 대기됩니다.

1. 시간 제한 및 다시 시도: 제한 또는 제한 규칙이 이행되면 Journey Optimizer은 시간 제한 기간의 끝에 도달할 때까지 호출을 수행하려고 시도합니다.

>[!TIP]
>
>만료 불일치 및 401 오류를 방지하려면 특히 작업 로드가 많은 경우 외부 API의 토큰 만료 기간과 Journey Optimizer [`cacheDuration` 설정](../datasource/external-data-sources.md#custom-authentication-access-token) 사이에 최소 1분 이상의 버퍼를 두는 것이 좋습니다.

## API 한도 설정 및 제한 {#capping}

### API 최대 가용량 및 조절 정보

데이터 소스나 작업을 구성할 때는 여정에서 사용할 추가 정보를 검색하거나 메시지 또는 API 호출을 보내기 위해 특정 시스템에 대한 연결을 설정하게 됩니다.

여정 API는 이벤트를 초당 최대 5,000개까지 지원하지만, 일부 외부 시스템이나 API의 처리량은 이 수준이 아닐 수 있습니다. 이러한 시스템을 오버로드할 수 없도록 **Capping** 및 **Throttling** API를 사용하여 초당 전송되는 이벤트 수를 제한할 수 있습니다.

여정이 API를 호출할 때마다 호출은 API 엔진을 통과합니다. API에 설정된 제한에 도달하면 최대 가용량 API를 사용하는 경우 호출이 거부되거나, 조절 API를 사용하는 경우 최대 6시간 동안 대기하고 수신된 순서대로 가능한 한 빨리 처리됩니다.

예를 들어 외부 시스템에 대해 초당 200개의 호출 제한 또는 제한 규칙을 정의했다고 가정해 보겠습니다. 서로 다른 여정 10개에서 사용자 정의 작업이 이 시스템을 호출합니다. 한 여정이 초당 300개의 호출을 받으면 사용 가능한 200개의 슬롯을 사용하고 나머지 100개의 슬롯을 삭제하거나 대기열에 추가합니다. 최대 처리량을 초과했으므로 다른 9개의 여정에는 호출을 처리할 슬롯이 남아 있지 않습니다. 이러한 세부성 설정을 통해 외부 시스템을 과부하와 충돌로부터 보호할 수 있습니다.

>[!IMPORTANT]
>
>**최대 가용량 여정**&#x200B;은(는) 특정 끝점(URL)에 대해 샌드박스 수준에서 구성되지만 해당 샌드박스의 모든 규칙에 대해 전역입니다. 캡핑은 데이터 소스와 사용자 지정 작업 모두에서 사용할 수 있습니다.
>
>**스로틀링 규칙**&#x200B;은 프로덕션 샌드박스에서만 특정 엔드포인트에 대해 구성되지만 모든 샌드박스의 모든 여정에 적용됩니다. 조직당 하나의 제한 구성만 사용할 수 있습니다. 조절은 사용자 지정 작업에서만 사용할 수 있습니다.
>
>**maxCallsCount** 값은 1보다 커야 합니다.

API 작업 방법에 대한 자세한 내용은 다음 섹션을 참조하십시오.

* [Capping API](capping.md)
* [Throttling API](throttling.md)

API에 대한 자세한 설명은 [Adobe Journey Optimizer API 설명서](https://developer.adobe.com/journey-optimizer-apis/references/journeys/)에서 확인할 수 있습니다

### 데이터 소스 및 사용자 정의 작업 용량 {#capacity}

**외부 데이터 소스**&#x200B;에 대한 초당 최대 호출 수는 15회로 제한됩니다. 이 제한을 넘기면 사용하는 API에 따라 초과 호출을 삭제하거나 큐에 추가합니다. 비공개 외부 데이터 소스의 경우 Adobe에 문의하여 허용 목록에 엔드포인트를 추가함으로써 이 제한을 늘릴 수 있지만, 공개 외부 데이터 소스에 대해서는 불가능합니다. * [데이터 소스를 구성하는 방법을 알아봅니다](../datasource/about-data-sources.md).

>[!NOTE]
>
>데이터 소스에서 해당 데이터 소스에 사용한 것과 다른 엔드포인트를 사용하는 사용자 정의 인증을 사용하는 경우에는 Adobe 문의를 통해 해당 엔드포인트도 허용 목록에 추가해야 합니다.

**사용자 정의 작업**&#x200B;을 구성할 때는 외부 API의 용량을 평가해야 합니다. 예를 들어 Journey Optimizer이 초당 1000개의 호출을 전송하고 시스템이 초당 200개의 호출만 지원할 수 있는 경우 시스템이 포화되지 않도록 최대 가용량 또는 제한 구성을 정의해야 합니다. [작업을 구성하는 방법 알아보기](../action/action.md)

>[!NOTE]
>
>이제 응답이 지원되므로 외부 데이터 소스 사용 사례에서 데이터 소스 대신 사용자 지정 작업을 사용해야 합니다. 응답에 대한 자세한 내용은 이 [섹션](../action/action-response.md)을 참조하세요.

## 응답 시간이 느린 엔드포인트 {#response-time}

끝점의 응답 시간이 0.75초보다 크면 해당 사용자 지정 작업 호출이 기본 서비스 대신 전용 **느린 사용자 지정 작업 서비스**&#x200B;를 통해 라우팅됩니다.

이 느린 사용자 지정 작업 서비스는 30초마다 150,000번의 호출 제한을 적용합니다. 이 제한은 슬라이딩 윈도우를 사용하여 시행되며, 이 윈도우는 그 30초 주기 내에서 임의의 밀리초로 시작할 수 있다. 창이 가득 차면 추가 호출이 거부되고 최대 가용량 오류가 발생합니다. 시스템은 다음 고정 간격을 기다리지 않고 30초 임계값에 도달하면 바로 캡핑을 시작합니다.

느린 끝점은 파이프라인에 큐에 있는 모든 작업에서 지연을 발생시킬 수 있으므로 응답 시간이 느린 끝점으로 사용자 지정 작업을 구성하지 않는 것이 좋습니다. 이러한 작업을 느린 서비스로 라우팅하면 전체 시스템 성능을 보호하고 다른 사용자 지정 작업에 대한 추가적인 지연을 방지할 수 있습니다.

## 시간 초과 및 재시도 {#timeout}

최대 가용량 또는 제한 규칙이 충족되면 시간 초과 규칙이 적용됩니다.

각 여정에서 시간 제한 기간을 정의할 수 있습니다. 이렇게 하면 외부 시스템을 호출할 때 최대 기간을 설정할 수 있습니다. 시간 제한 기간은 여정 속성에 구성됩니다. [이 페이지](../building-journeys/journey-properties.md#timeout_and_error)를 참조하십시오.

이 시간 제한은 모든 외부 호출(사용자 지정 작업 및 사용자 지정 데이터 소스의 외부 API 호출)에 적용됩니다. 기본적으로 30초로 설정되어 있습니다.

정의된 시간 제한 기간 동안 Journey Optimizer은 외부 시스템을 호출하려고 합니다. 첫 번째 호출 후 시간 초과 기간 끝에 도달할 때까지 최대 3회의 재시도를 수행할 수 있습니다. 재시도 횟수는 변경할 수 없습니다.

각 재시도에서는 하나의 슬롯을 사용합니다. 초당 호출 수가 100개이고 각 호출에 두 번의 재시도가 필요한 경우, 속도는 초당 호출 수 30개로 떨어집니다(각 호출에는 첫 번째 호출과 두 번의 재시도, 이렇게 3개의 슬롯이 사용됨).

시간 제한 기간 값은 사용 사례에 따라 다릅니다. 예를 들어 클라이언트가 스토어에 들어올 때 메시지를 빠르게 보내려는 경우 긴 시간 제한을 설정하지 않으려고 합니다. 또한 시간 제한이 길수록 더 많은 항목이 큐에 배치됩니다. 이 경우 성능에 큰 영향을 줄 수 있습니다. Journey Optimizer이 초당 1,000번의 호출을 수행하는 경우 5초 또는 15초의 데이터를 유지하면 시스템이 빠르게 압도될 수 있습니다.

5초의 시간 제한에 대한 예를 살펴보겠습니다.

* 첫 번째 호출은 5초 미만 동안 지속됩니다. 호출이 성공하고 재시도가 수행되지 않습니다.
* 첫 번째 호출은 5초 이상 지속됩니다. 호출이 취소되고 다시 시도되지 않습니다. 보고에서는 시간 초과 오류로 계산됩니다.
* 2초 후 첫 번째 호출이 실패합니다(외부 시스템이 오류를 반환함). 최대 가용량 슬롯을 사용할 수 있는 경우 재시도 시간이 3초 남았습니다.
   * 5초가 끝나기 전에 세 번의 재시도 중 하나가 성공하면 호출이 수행되며 오류가 없습니다.
   * 재시도 중 시간 초과 기간 끝에 도달하면 호출이 취소되고 보고의 시간 초과 오류로 계산됩니다.

## 자주 묻는 질문 {#faq}

Journey Optimizer과 외부 시스템 통합에 대한 FAQ는 다음과 같습니다.

세부 정보가 필요하십니까? 이 페이지 하단의 피드백 옵션을 사용하여 질문을 제기하거나 [Adobe Journey Optimizer 커뮤니티](https://experienceleaguecommunities.adobe.com/t5/adobe-journey-optimizer/ct-p/journey-optimizer?profile.language=ko){target="_blank"}에 연결하세요.

+++ 캡핑 또는 조절 규칙을 구성하려면 어떻게 해야 합니까? 기본 규칙이 있습니까?

제한 또는 제한 규칙을 만들려면 [이 섹션](../configuration/external-systems.md#capping)을 참조하세요. 기본적으로 제한 규칙은 없으며 모든 사용자 지정 작업, 호스트 및 샌드박스에 대해 1분 동안 정의된 최대 호출 수인 300,000개입니다. &quot;호스트당&quot; 제한은 도메인 수준(예: example.com)에서 적용됩니다. 이 제한은 사용자 정의 작업으로 타깃팅된 외부 끝점을 보호하기 위해 고객 사용량을 기준으로 설정되었습니다. 필요한 경우 Capping/Throttling API를 통해 상한 설정 또는 스로틀링 제한을 보다 크게 정의하는 방법으로 이 설정을 재정의할 수 있습니다. 최대 한도 증가를 요청하는 방법에 대한 자세한 내용은 [이 페이지](../action/about-custom-action-configuration.md)를 참조하세요.

+++

+++ 몇 번이나 다시 시도합니까? 재시도 횟수를 변경하거나 재시도 사이의 최소 대기 기간을 정의할 수 있습니까?

주어진 호출의 경우 첫 번째 호출 후 시간 초과 기간 종료에 도달할 때까지 최대 3회의 재시도를 수행할 수 있습니다. 다시 시도 횟수와 각 다시 시도 사이의 시간은 변경할 수 없습니다. [이 섹션](../configuration/external-systems.md#timeout)을 참조하십시오.

+++

+++ 시간 초과는 어디에서 구성할 수 있습니까? 최대값이 있습니까?

각 여정에서 시간 제한 기간을 정의할 수 있습니다. 시간 제한 기간은 여정 속성에 구성됩니다. 시간 제한 기간은 1초에서 30초 사이여야 합니다. [이 섹션](../configuration/external-systems.md#timeout) 및 [이 페이지](../building-journeys/journey-properties.md#timeout_and_error)를 참조하세요.

+++

+++ 이그레스 프록시는 무엇이며 언제 사용해야 합니까?

이그레스 프록시는 Journey Optimizer에서 외부 시스템으로의 아웃바운드 호출을 위해 **고정 IP 주소**&#x200B;를 제공합니다. 타사 엔드포인트에 IP 허용 목록에 추가가 필요한 경우 사용합니다.

**중요:** 이그레스 프록시는 처리량, 속도 제한 또는 동시 연결 수를 제어하지 않습니다. 호출 볼륨 및 연결 제한을 관리하려면 [API 제한](capping.md) 또는 [API 제한](throttling.md)을 사용합니다.

**이그레스 프록시 사용 대상:**
* 타사 방화벽 또는 엔드포인트에서 정적 IP 허용 목록에 추가

**다음에 대한 최대 가용량/제한 API 사용:**
* 초당 API 호출 수 제한
* 엔드포인트에 대한 동시 연결 제어
* 과부하로부터 외부 시스템 보호

허용 목록에 추가 목적으로 고정 IP가 필요한 경우 Adobe에 연락하여 조직의 이그레스 프록시를 활성화하십시오.

+++

+++ 사용자 지정 작업을 사용할 때 Journey Optimizer에서 연 최대 연결 수는 얼마입니까?

IP 프록시가 활성화되고 대상 끝점에 조절 구성이 정의된 경우 연결 수는 속도를 기반으로 합니다(예상된 수치이며 보장된 숫자가 아님).

* 200~2000c/s: 50개 연결
* 2000~3000: 75개 연결
* 3000~4000: 100개 연결
* 4000~5000: 125개 연결

끝점에 전송률 조절 구성이 정의되지 않은 경우 Journey Optimizer 엔진은 확장되도록 설계되었으며 최대 연결 수(2,000개 이상)로 늘어날 수 있습니다. 제한된 연결 수를 얻으려면 조절 구성을 사용해야 합니다.

+++
